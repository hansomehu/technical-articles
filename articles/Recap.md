### 百度、蔚来



#### 项目

---









#### Cache

---

redis都用到了哪些数据类型，其底层实现都是什么

redis如何实现分布式锁，为什么需要分布式锁

**Redis为什么快**

Redis有哪些设计的不错并值得参考的地方

Redis分布式锁，与Zookeeper实现分布式锁的区别

数据库和缓存的一致性



#### DB

---

##### **为什么用到了 MongoDB，为什么不用MySQL**



##### Mysql扣减失败了怎么办 ，Mysql**会不会库存扣超了**



**顺序写入有什么好处** 



**MySQL是顺序写入吗？** 



**对比MySQL的随机写和kafka顺序写，比较两者有什么优劣**



**innodb索引相关** 



**索引下推和覆盖索引** 



##### MySQL的四种隔离级别，以及三种错误，怎么解决幻读



##### 说一下MySQL的事务 



##### 介绍一下acid 



**原子性的原理或者说如何保证原子性**



##### 介绍一下MVCC



#### 队列

---

##### RabbitMQ架构 



##### 说一下kafka的原理、流程 



##### 消息队列可靠性保证 





#### Java底层

---

#####  **hashmap的原理** 



##### **Java中int和Integer**



##### **创建对象过程** 

<img src="https://hansomehu-picgo.oss-cn-hangzhou.aliyuncs.com/typora/image-20220728184948792.png" alt="image-20220728184948792" style="zoom: 25%;" />类加载检查



##### **JVM内存区域** 



##### **OOM和栈溢出，在哪里出现，什么时候出现**

 

##### **调优的命令和参数**



##### **线程池相关，ThreadPoolExecutor的执行过程**



##### **ReentrantLock的实现**



##### 线程池架构、参数、工作流程 CachedThreadPool 参数 

##### ConcurrentHashMap底层原理，get加不加锁  

##### ConcurrentHashMap如何保证并发访问，get加不加锁？ 



**说一个阻塞队列的实现**







##### **AQS中Condition类实现**

AQS中维护了一个队列来控制线程的执行，condition中使用了另一个等待队列来实现条件的判断，condition必须在aqs的acquire获取锁后使用，调用condition**.await()**方法将添加一个node到条件队列中，在调用**signal()**或**signalAll()**后将此节点移出condition的等待队列放到锁的等待队列中去竞争锁，取到锁后继续执行后续逻辑。







##### 多线程开销问题（分段思想，协程，加锁开销） 





##### **什么程序适用于协程模型？** 

一次调用，资源稀疏型的线程适合用虚拟线程（协程）来实现

因为协程每次用完就会报废，不像线程那样在JVM中有很大的私有内存空间

<img src="https://hansomehu-picgo.oss-cn-hangzhou.aliyuncs.com/typora/image-20220729003819003.png" alt="image-20220729003819003" style="zoom:25%;" />





##### volatile修饰一个对象，那么这个对象的成员变量是够具有可见。（不具有，值代表对象引用的地址具有可见性）



**阻塞队列工作流程**



##### 多态底层原理，方法表结构



**介绍static，并尝试从底层去解释**



##### 抽象类和接口的异同 

##### 说一下反射 

##### 如果一个服务器中应用程序执行很慢，如何排查问题以及如何解决

##### 项目中的垃圾回收问题，如何调优

##### 如果当前cpu负载很高，如何检测问题在哪以及如何解决。如何判断线程对cpu的负载有多少影响 

---

tcp和udp的区别，除了可靠性还有什么吗



三次握手，四次挥手



**线程和进程的区别，用户态和内核态线程的区别，如果一个进程内有一个线程切换到内核态，其他的线程还能工作吗**



**进程间如何进行通信**

管道

信号量

共享内存

socket套接字

 

 **进程的PCB包含哪些信息**

进程管理块

1. 程序ID（PID、进程句柄）：它是唯一的，一个进程都必须对应一个PID。PID一般是整形数字

2. 特征信息：一般分系统进程、用户进程、或者内核进程等

3. 进程状态：运行、就绪、阻塞，表示进程现的运行情况

4. 优先级：表示获得CPU控制权的优先级大小

5. 通信信息：进程之间的通信关系的反映，由于操作系统会提供通信信道

6. 现场保护区：保护阻塞的进程用

  

Linux用过哪些命令 



**死锁条件和预防**

你说破坏互斥条件，那必须要有资源保持互斥怎么办（加锁的时候设置超时时间，超过超时时间就放弃重新竞争锁，长时间没能获取的资源的进程释放已有的资源）

<u>互斥：</u>某种资源一次只允许一个进程访问，即该资源一旦分配给某个进程，其他进程就不能再访问，直到该进程访问结束
<u>占有且等待：</u>一个进程本身占有资源（一种或多种），同时还有资源未得到满足，正在等待其他进程释放该资源
<u>不可抢占：</u>别人已经占有了某项资源，你不能因为自己也需要该资源，就去把别人的资源抢过来
<u>循环等待：</u>存在一个进程链，使得每个进程都占有下一个进程所需的至少一种资源

破坏占有及等待条件：该方法是对第一种方法的改进，允许进程只获得运行初期需要的资源，便开始运行，在运行过程中逐步释放掉分配到的已经使用完毕的资源，然后再去请求新的资源

破坏不可抢占条件：当一个已经持有了一些资源的进程在提出新的资源请求没有得到满足时，它必须释放已经保持的所有资源，待以后需要使用的时候再重新申请

破坏循环等待条件：就是给线程设一个优先级

 



#### 算法 Coding

求无符号二进制数中1的个数？如何将时间复杂度优化为O（1）

```java
public class Solution {
    // you need to treat n as an unsigned value
    public int hammingWeight(int n) {
        int count = 0;
        for (int i = 0; i < 32; i++) {
            if( (n & (1 << i)) != 0)
                count++;
        }
        return count;
    }
}
```

链表求和

把一个二叉树按照前序遍历转变为链表

2*8怎么更高效（位运算）

整数的二进制表示中如何计算1个数（位运算 x&x-1）

手写策略模式

反转链表的实现：迭代和递归

lc 最大连续子数组的乘积 

lc 正则表达式

手撕单例

删除链表倒数第N个节点

非递归写二叉树的后序遍历 

一个数组，target，找两个和是target的下标 

股票只买卖一次、多次买卖最大利润 

判断链表是不是有环 

根据前序遍历和后序遍历，建一棵二叉树



### Fail掉的题目

**HTTP常用接口，post与put的区别，get与put的区别**

POST方法不是幂等的，而PUT方法则有幂等性幂等： POST在请求的时候，服务器会每次都创建一个文件，但是在PUT方法的时候只是简单地更新，而不是去重新创建



**jvm常用参数**

Object类的三个方法：comparator，equals，hashCode



**Java的深拷贝与浅拷贝**

浅拷贝只是拷贝了源对象的地址，所以源对象的值发生变化时，拷贝对象的值也会发生变化。而深拷贝则是拷贝了源对象的所有值，相当于属性值完全相同的新对象

执行深拷贝的方法：

1. 构造函数
2. Jackson序列化

```java
User copyUser = objectMapper.readValue(objectMapper.writeValueAsString(user), User.class);
```



**websocket如何使用，ws的消息协议**

它是一种协议要明确，握手阶段用HTTP协议，数据传输基于TCP协议

<img src="https://hansomehu-picgo.oss-cn-hangzhou.aliyuncs.com/typora/image-20220728115028644.png" alt="image-20220728115028644" style="zoom: 25%;" />

创建bossGroup、workerGroup -> new ServerBootstrap( )创建服务器 -> 在childHandler里面放入shakehand自定义协议initChannel -> 优雅关闭

数据协议还是http，从httpRequest中拿回数据



git的基本使用

es处理日志的大数据链路

**Java的基本类型**

hashtable、arraylist的源码

mybatisplus如何处理分库分表

es如何使用     索引等

canal的使用



hashmap采用红黑树带来的优势是什么？ 似乎就是查找时间变成了O(log N)

synchorized获取锁的底层原理、锁膨胀



场景题：如何保证不重复支付、Kafka消费者比分区数多怎么办
